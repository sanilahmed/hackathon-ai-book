@startuml Sensor Simulation Architecture

!theme plain

title Digital Twin Sensor Simulation Architecture

package "Gazebo Simulation" {
  component "Physics Engine" as phys #LightBlue
  component "Sensor Plugins" as sensor_plugins #LightBlue
  component "Robot Model (SDF)" as robot_sdf #LightBlue
  component "World Definition" as world_sdf #LightBlue
}

package "Unity Visualization" {
  component "Robot Model (URDF/SDF)" as robot_unity #LightGreen
  component "Perception Package" as perception #LightGreen
  component "Camera System" as unity_cam #LightGreen
  component "Sensor Visualizers" as sensor_viz #LightGreen
}

package "ROS 2 Bridge" {
  component "Gazebo-ROS Bridge" as gz_bridge #LightYellow
  component "Unity-ROS Bridge" as unity_bridge #LightYellow
  component "Topic Synchronization" as sync #LightYellow
}

package "ROS 2 Ecosystem" {
  component "Joint State Publisher" as jsp #LightCyan
  component "Robot State Publisher" as rsp #LightCyan
  component "TF Broadcaster" as tfb #LightCyan
  component "Sensor Processors" as sensor_proc #LightCyan
}

phys --> sensor_plugins : "generates sensor data"
robot_sdf --> phys : "loads robot model"
world_sdf --> phys : "defines environment"
sensor_plugins --> gz_bridge : "publishes sensor topics"

robot_unity --> perception : "enables perception"
unity_cam --> perception : "captures images"
sensor_viz --> unity_cam : "visualizes sensors"
perception --> unity_bridge : "sends sensor data"

gz_bridge --> jsp : "joint states"
gz_bridge --> sensor_proc : "sensor data"
unity_bridge --> perception : "perception data"
sync --> tfb : "synchronizes transforms"

jsp --> rsp : "joint states"
rsp --> tfb : "transforms"
sensor_proc --> tfb : "sensor transforms"

@enduml