"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[45],{4559(n,e,i){i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>t,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var o=i(4848),a=i(8453);const r={sidebar_label:"Lab 2.2: Robot Model Integration"},t="Lab Exercise 2.2: Robot Model Integration in Gazebo",s={id:"modules/lab-exercises/lab-2-2-robot-model-integration",title:"Lab Exercise 2.2: Robot Model Integration in Gazebo",description:"This lab exercise covers integrating robot models with Gazebo simulation and ROS 2.",source:"@site/docs/modules/lab-exercises/lab-2-2-robot-model-integration.md",sourceDirName:"modules/lab-exercises",slug:"/modules/lab-exercises/lab-2-2-robot-model-integration",permalink:"/hackathon-ai-book/modules/lab-exercises/lab-2-2-robot-model-integration",draft:!1,unlisted:!1,editUrl:"https://github.com/sanilahmed/hackathon-ai-book/tree/main/docs/modules/lab-exercises/lab-2-2-robot-model-integration.md",tags:[],version:"current",frontMatter:{sidebar_label:"Lab 2.2: Robot Model Integration"},sidebar:"tutorialSidebar",previous:{title:"Lab 2.1: Gazebo Setup",permalink:"/hackathon-ai-book/modules/lab-exercises/lab-2-1-gazebo-setup"},next:{title:"Lab 2.3: Unity Robotics Integration",permalink:"/hackathon-ai-book/modules/lab-exercises/lab-2-3-unity-robotics-integration"}},l={},c=[{value:"Objectives",id:"objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Robot Model Preparation",id:"robot-model-preparation",level:2},{value:"URDF to SDF Conversion",id:"urdf-to-sdf-conversion",level:3},{value:"Physics Configuration",id:"physics-configuration",level:3},{value:"Gazebo-Specific Tags",id:"gazebo-specific-tags",level:2},{value:"Material Properties",id:"material-properties",level:3},{value:"Inertial Properties",id:"inertial-properties",level:3},{value:"Joint Configuration",id:"joint-configuration",level:2},{value:"Joint Transmission",id:"joint-transmission",level:3},{value:"Gazebo Joint Plugins",id:"gazebo-joint-plugins",level:3},{value:"Sensor Integration",id:"sensor-integration",level:2},{value:"Camera Sensor",id:"camera-sensor",level:3},{value:"IMU Sensor",id:"imu-sensor",level:3},{value:"ROS 2 Control Integration",id:"ros-2-control-integration",level:2},{value:"ROS 2 Control Configuration",id:"ros-2-control-configuration",level:3},{value:"Controller Configuration",id:"controller-configuration",level:3},{value:"Launch Configuration",id:"launch-configuration",level:2},{value:"Complete Launch File",id:"complete-launch-file",level:3},{value:"Testing and Validation",id:"testing-and-validation",level:2},{value:"Launch the Robot",id:"launch-the-robot",level:3},{value:"Verification Steps",id:"verification-steps",level:3},{value:"Exercise Tasks",id:"exercise-tasks",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Summary",id:"summary",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h1,{id:"lab-exercise-22-robot-model-integration-in-gazebo",children:"Lab Exercise 2.2: Robot Model Integration in Gazebo"}),"\n",(0,o.jsx)(e.p,{children:"This lab exercise covers integrating robot models with Gazebo simulation and ROS 2."}),"\n",(0,o.jsx)(e.h2,{id:"objectives",children:"Objectives"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Import and configure robot models in Gazebo"}),"\n",(0,o.jsx)(e.li,{children:"Set up physics properties and materials"}),"\n",(0,o.jsx)(e.li,{children:"Configure sensors and actuators"}),"\n",(0,o.jsx)(e.li,{children:"Test robot simulation in Gazebo"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Gazebo Garden installed"}),"\n",(0,o.jsx)(e.li,{children:"ROS 2 Humble with Gazebo packages"}),"\n",(0,o.jsx)(e.li,{children:"Basic URDF knowledge"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"robot-model-preparation",children:"Robot Model Preparation"}),"\n",(0,o.jsx)(e.h3,{id:"urdf-to-sdf-conversion",children:"URDF to SDF Conversion"}),"\n",(0,o.jsx)(e.p,{children:"Gazebo can work with both URDF and SDF formats. For complex robots, you may want to convert or enhance your URDF:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-xml",children:'\x3c!-- Enhanced URDF with Gazebo-specific tags --\x3e\n<?xml version="1.0"?>\n<robot name="my_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">\n  \x3c!-- Base link --\x3e\n  <link name="base_link">\n    <visual>\n      <geometry>\n        <cylinder length="0.2" radius="0.3"/>\n      </geometry>\n      <material name="blue">\n        <color rgba="0 0 1 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.2" radius="0.3"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="10"/>\n      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Gazebo-specific properties --\x3e\n  <gazebo reference="base_link">\n    <material>Gazebo/Blue</material>\n    <mu1>0.2</mu1>\n    <mu2>0.2</mu2>\n    <kp>1000000.0</kp>\n    <kd>1.0</kd>\n  </gazebo>\n</robot>\n'})}),"\n",(0,o.jsx)(e.h3,{id:"physics-configuration",children:"Physics Configuration"}),"\n",(0,o.jsx)(e.p,{children:"Configure realistic physics properties:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Mass and inertia tensors"}),"\n",(0,o.jsx)(e.li,{children:"Friction coefficients"}),"\n",(0,o.jsx)(e.li,{children:"Spring and damping parameters"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"gazebo-specific-tags",children:"Gazebo-Specific Tags"}),"\n",(0,o.jsx)(e.h3,{id:"material-properties",children:"Material Properties"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-xml",children:'<gazebo reference="link_name">\n  <material>Gazebo/Orange</material>\n  <mu1>0.8</mu1>  \x3c!-- Primary friction coefficient --\x3e\n  <mu2>0.8</mu2>  \x3c!-- Secondary friction coefficient --\x3e\n  <kp>1000000.0</kp>  \x3c!-- Contact stiffness --\x3e\n  <kd>1000000.0</kd>  \x3c!-- Contact damping --\x3e\n  <max_vel>100.0</max_vel>  \x3c!-- Maximum contact penetration velocity --\x3e\n  <min_depth>0.001</min_depth>  \x3c!-- Minimum contact depth --\x3e\n</gazebo>\n'})}),"\n",(0,o.jsx)(e.h3,{id:"inertial-properties",children:"Inertial Properties"}),"\n",(0,o.jsx)(e.p,{children:"For better simulation stability:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-xml",children:'<inertial>\n  <mass value="1.0"/>\n  <origin xyz="0 0 0" rpy="0 0 0"/>\n  <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>\n</inertial>\n'})}),"\n",(0,o.jsx)(e.h2,{id:"joint-configuration",children:"Joint Configuration"}),"\n",(0,o.jsx)(e.h3,{id:"joint-transmission",children:"Joint Transmission"}),"\n",(0,o.jsx)(e.p,{children:"Configure joint transmissions for ROS 2 control:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-xml",children:'<transmission name="joint1_trans">\n  <type>transmission_interface/SimpleTransmission</type>\n  <joint name="joint1">\n    <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>\n  </joint>\n  <actuator name="joint1_motor">\n    <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>\n    <mechanicalReduction>1</mechanicalReduction>\n  </actuator>\n</transmission>\n'})}),"\n",(0,o.jsx)(e.h3,{id:"gazebo-joint-plugins",children:"Gazebo Joint Plugins"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-xml",children:'<gazebo reference="joint1">\n  <implicitSpringDamper>1</implicitSpringDamper>\n  <provideFeedback>1</provideFeedback>\n</gazebo>\n'})}),"\n",(0,o.jsx)(e.h2,{id:"sensor-integration",children:"Sensor Integration"}),"\n",(0,o.jsx)(e.h3,{id:"camera-sensor",children:"Camera Sensor"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-xml",children:'<link name="camera_link">\n  <visual>\n    <geometry>\n      <box size="0.02 0.02 0.02"/>\n    </geometry>\n  </visual>\n  <collision>\n    <geometry>\n      <box size="0.02 0.02 0.02"/>\n    </geometry>\n  </collision>\n  <inertial>\n    <mass value="0.1"/>\n    <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0001"/>\n  </inertial>\n</link>\n\n<joint name="camera_joint" type="fixed">\n  <parent link="base_link"/>\n  <child link="camera_link"/>\n  <origin xyz="0.2 0 0.1" rpy="0 0 0"/>\n</joint>\n\n<gazebo reference="camera_link">\n  <sensor name="camera" type="camera">\n    <camera>\n      <horizontal_fov>1.047</horizontal_fov>\n      <image>\n        <width>640</width>\n        <height>480</height>\n      </image>\n      <clip>\n        <near>0.1</near>\n        <far>100</far>\n      </clip>\n    </camera>\n    <always_on>1</always_on>\n    <update_rate>30</update_rate>\n    <visualize>true</visualize>\n  </sensor>\n</gazebo>\n'})}),"\n",(0,o.jsx)(e.h3,{id:"imu-sensor",children:"IMU Sensor"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-xml",children:'<gazebo reference="imu_link">\n  <sensor name="imu_sensor" type="imu">\n    <always_on>true</always_on>\n    <update_rate>100</update_rate>\n    <visualize>false</visualize>\n    <imu>\n      <angular_velocity>\n        <x>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>2e-4</stddev>\n          </noise>\n        </x>\n        <y>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>2e-4</stddev>\n          </noise>\n        </y>\n        <z>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>2e-4</stddev>\n          </noise>\n        </z>\n      </angular_velocity>\n      <linear_acceleration>\n        <x>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>1.7e-2</stddev>\n          </noise>\n        </x>\n        <y>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>1.7e-2</stddev>\n          </noise>\n        </y>\n        <z>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>1.7e-2</stddev>\n          </noise>\n        </z>\n      </linear_acceleration>\n    </imu>\n  </sensor>\n</gazebo>\n'})}),"\n",(0,o.jsx)(e.h2,{id:"ros-2-control-integration",children:"ROS 2 Control Integration"}),"\n",(0,o.jsx)(e.h3,{id:"ros-2-control-configuration",children:"ROS 2 Control Configuration"}),"\n",(0,o.jsxs)(e.p,{children:["Create a ",(0,o.jsx)(e.code,{children:"ros2_control.xacro"})," file:"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-xml",children:'<xacro:macro name="ros2_control" params="name">\n  <ros2_control name="${name}" type="system">\n    <hardware>\n      <plugin>gazebo_ros2_control/GazeboSystem</plugin>\n    </hardware>\n    <joint name="joint1">\n      <command_interface name="position">\n        <param name="min">-3.14</param>\n        <param name="max">3.14</param>\n      </command_interface>\n      <state_interface name="position"/>\n      <state_interface name="velocity"/>\n    </joint>\n  </ros2_control>\n</xacro:macro>\n'})}),"\n",(0,o.jsx)(e.h3,{id:"controller-configuration",children:"Controller Configuration"}),"\n",(0,o.jsxs)(e.p,{children:["Create a ",(0,o.jsx)(e.code,{children:"controllers.yaml"})," file:"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"controller_manager:\n  ros__parameters:\n    update_rate: 100  # Hz\n\n    joint_state_broadcaster:\n      type: joint_state_broadcaster/JointStateBroadcaster\n\n    forward_position_controller:\n      type: position_controllers/JointGroupPositionController\n\nforward_position_controller:\n  ros__parameters:\n    joints:\n      - joint1\n      - joint2\n      - joint3\n"})}),"\n",(0,o.jsx)(e.h2,{id:"launch-configuration",children:"Launch Configuration"}),"\n",(0,o.jsx)(e.h3,{id:"complete-launch-file",children:"Complete Launch File"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument, IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch.substitutions import Command, LaunchConfiguration, PathJoinSubstitution\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\n\ndef generate_launch_description():\n    # Declare arguments\n    pkg_share = FindPackageShare('my_robot_description').find('my_robot_description')\n\n    robot_name_arg = DeclareLaunchArgument(\n        'robot_name',\n        default_value='my_robot',\n        description='Name of the robot'\n    )\n\n    # Robot state publisher\n    robot_state_publisher = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        name='robot_state_publisher',\n        output='both',\n        parameters=[\n            {'use_sim_time': True},\n            {'robot_description': Command([\n                'xacro ',\n                PathJoinSubstitution([\n                    FindPackageShare('my_robot_description'),\n                    'urdf',\n                    'robot.urdf.xacro'\n                ])\n            ])}\n        ]\n    )\n\n    # Spawn entity in Gazebo\n    spawn_entity = Node(\n        package='gazebo_ros',\n        executable='spawn_entity.py',\n        arguments=[\n            '-topic', 'robot_description',\n            '-entity', LaunchConfiguration('robot_name'),\n            '-x', '0', '-y', '0', '-z', '1.0'\n        ],\n        output='screen'\n    )\n\n    # ROS 2 control\n    ros2_control = Node(\n        package='controller_manager',\n        executable='spawner',\n        arguments=['joint_state_broadcaster'],\n        output='screen'\n    )\n\n    # Launch Gazebo\n    gazebo = IncludeLaunchDescription(\n        PythonLaunchDescriptionSource([\n            PathJoinSubstitution([\n                FindPackageShare('gazebo_ros'),\n                'launch',\n                'gazebo.launch.py'\n            ])\n        ])\n    )\n\n    return LaunchDescription([\n        robot_name_arg,\n        gazebo,\n        robot_state_publisher,\n        spawn_entity,\n        ros2_control\n    ])\n"})}),"\n",(0,o.jsx)(e.h2,{id:"testing-and-validation",children:"Testing and Validation"}),"\n",(0,o.jsx)(e.h3,{id:"launch-the-robot",children:"Launch the Robot"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:"Build your package:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select my_robot_description\nsource install/setup.bash\n"})}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:"Launch the simulation:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"ros2 launch my_robot_gazebo robot.launch.py\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"verification-steps",children:"Verification Steps"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsx)(e.li,{children:"Check robot in Gazebo GUI"}),"\n",(0,o.jsxs)(e.li,{children:["Verify joint states:","\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"ros2 topic echo /joint_states\n"})}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["Test joint control:","\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"ros2 control list_controllers\n"})}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["Verify sensor data:","\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"ros2 topic echo /camera/image_raw\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"exercise-tasks",children:"Exercise Tasks"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsx)(e.li,{children:"Create a simple robot URDF with at least 3 joints"}),"\n",(0,o.jsx)(e.li,{children:"Add Gazebo-specific tags for physics properties"}),"\n",(0,o.jsx)(e.li,{children:"Configure at least one sensor (camera, IMU, or LIDAR)"}),"\n",(0,o.jsx)(e.li,{children:"Set up ROS 2 control for the joints"}),"\n",(0,o.jsx)(e.li,{children:"Test the robot in Gazebo simulation"}),"\n",(0,o.jsx)(e.li,{children:"Verify that you can command joint movements"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,o.jsx)(e.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Robot falls through ground"}),": Check inertial properties and mass"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Joints don't respond"}),": Verify transmission configuration"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Sensors not publishing"}),": Check Gazebo sensor configuration"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Controller not loading"}),": Verify controller configuration YAML"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,o.jsx)(e.p,{children:"In this lab, you learned to integrate robot models with Gazebo simulation, configure physics properties, add sensors, and set up ROS 2 control. You now have a complete simulation pipeline for testing robot behavior."})]})}function u(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}},8453(n,e,i){i.d(e,{R:()=>t,x:()=>s});var o=i(6540);const a={},r=o.createContext(a);function t(n){const e=o.useContext(r);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:t(n.components),o.createElement(r.Provider,{value:e},n.children)}}}]);