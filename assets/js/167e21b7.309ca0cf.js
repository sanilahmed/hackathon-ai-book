"use strict";(globalThis.webpackChunkphysical_ai_book=globalThis.webpackChunkphysical_ai_book||[]).push([[6444],{7386(n,e,i){i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var t=i(4848),s=i(8453);const r={sidebar_label:"ROS 2 Synchronization"},o="ROS 2 Synchronization with Digital Twin",l={id:"modules/digital-twin/ros2-sync",title:"ROS 2 Synchronization with Digital Twin",description:"This document covers synchronizing the digital twin environment with ROS 2 systems.",source:"@site/docs/modules/digital-twin/ros2-sync.md",sourceDirName:"modules/digital-twin",slug:"/modules/digital-twin/ros2-sync",permalink:"/hackathon-ai-book/modules/digital-twin/ros2-sync",draft:!1,unlisted:!1,editUrl:"https://github.com/sanilahmed/hackathon-ai-book/tree/main/docs/modules/digital-twin/ros2-sync.md",tags:[],version:"current",frontMatter:{sidebar_label:"ROS 2 Synchronization"},sidebar:"tutorialSidebar",previous:{title:"Sensor Simulation",permalink:"/hackathon-ai-book/modules/digital-twin/sensor-simulation"},next:{title:"Lab 2.1: Gazebo Setup",permalink:"/hackathon-ai-book/modules/lab-exercises/lab-2-1-gazebo-setup"}},a={},c=[{value:"Overview",id:"overview",level:2},{value:"Communication Architecture",id:"communication-architecture",level:2},{value:"Bridge Pattern",id:"bridge-pattern",level:3},{value:"Publisher-Subscriber Pattern",id:"publisher-subscriber-pattern",level:3},{value:"Time Synchronization",id:"time-synchronization",level:2},{value:"Simulation Time vs. Real Time",id:"simulation-time-vs-real-time",level:3},{value:"Time Management",id:"time-management",level:3},{value:"State Synchronization",id:"state-synchronization",level:2},{value:"Robot State Management",id:"robot-state-management",level:3},{value:"Transform Synchronization",id:"transform-synchronization",level:3},{value:"Data Flow Patterns",id:"data-flow-patterns",level:2},{value:"From Simulation to ROS 2",id:"from-simulation-to-ros-2",level:3},{value:"From ROS 2 to Simulation",id:"from-ros-2-to-simulation",level:3},{value:"Implementation Strategies",id:"implementation-strategies",level:2},{value:"Direct Integration",id:"direct-integration",level:3},{value:"Network-Based Integration",id:"network-based-integration",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Message Throttling",id:"message-throttling",level:3},{value:"State Compression",id:"state-compression",level:3},{value:"Error Handling and Recovery",id:"error-handling-and-recovery",level:2},{value:"Connection Management",id:"connection-management",level:3},{value:"Data Validation",id:"data-validation",level:3},{value:"Best Practices",id:"best-practices",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h1,{id:"ros-2-synchronization-with-digital-twin",children:"ROS 2 Synchronization with Digital Twin"}),"\n",(0,t.jsx)(e.p,{children:"This document covers synchronizing the digital twin environment with ROS 2 systems."}),"\n",(0,t.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(e.p,{children:"Synchronization between the digital twin and ROS 2 is essential for:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Real-time simulation of robot behavior"}),"\n",(0,t.jsx)(e.li,{children:"Hardware-in-the-loop testing"}),"\n",(0,t.jsx)(e.li,{children:"Remote monitoring and control"}),"\n",(0,t.jsx)(e.li,{children:"Data logging and analysis"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"communication-architecture",children:"Communication Architecture"}),"\n",(0,t.jsx)(e.h3,{id:"bridge-pattern",children:"Bridge Pattern"}),"\n",(0,t.jsx)(e.p,{children:"The bridge pattern connects ROS 2 with simulation environments:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Message translation between systems"}),"\n",(0,t.jsx)(e.li,{children:"Time synchronization"}),"\n",(0,t.jsx)(e.li,{children:"Data format conversion"}),"\n",(0,t.jsx)(e.li,{children:"Error handling and recovery"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"publisher-subscriber-pattern",children:"Publisher-Subscriber Pattern"}),"\n",(0,t.jsx)(e.p,{children:"Use standard ROS 2 patterns for synchronization:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Joint states publisher from simulation"}),"\n",(0,t.jsx)(e.li,{children:"Sensor data publishers"}),"\n",(0,t.jsx)(e.li,{children:"Command subscribers for robot control"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"time-synchronization",children:"Time Synchronization"}),"\n",(0,t.jsx)(e.h3,{id:"simulation-time-vs-real-time",children:"Simulation Time vs. Real Time"}),"\n",(0,t.jsx)(e.p,{children:"Two main approaches:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Real-time"}),": Simulation runs at 1x speed matching real world"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Accelerated"}),": Simulation runs faster than real time for testing"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"time-management",children:"Time Management"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"# Example of time synchronization\nimport rclpy\nfrom rclpy.node import Node\nfrom builtin_interfaces.msg import Time\nfrom sensor_msgs.msg import JointState\nfrom std_msgs.msg import Header\n\nclass TimeSyncNode(Node):\n    def __init__(self):\n        super().__init__('time_sync_node')\n        self.joint_pub = self.create_publisher(JointState, 'joint_states', 10)\n\n    def publish_with_time(self, joint_positions):\n        msg = JointState()\n        msg.header = Header()\n        # Use simulation time if available, otherwise system time\n        msg.header.stamp = self.get_clock().now().to_msg()\n        msg.position = joint_positions\n        self.joint_pub.publish(msg)\n"})}),"\n",(0,t.jsx)(e.h2,{id:"state-synchronization",children:"State Synchronization"}),"\n",(0,t.jsx)(e.h3,{id:"robot-state-management",children:"Robot State Management"}),"\n",(0,t.jsx)(e.p,{children:"Keep robot states consistent between:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Joint positions and velocities"}),"\n",(0,t.jsx)(e.li,{children:"Sensor readings"}),"\n",(0,t.jsx)(e.li,{children:"Control commands"}),"\n",(0,t.jsx)(e.li,{children:"Environmental conditions"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"transform-synchronization",children:"Transform Synchronization"}),"\n",(0,t.jsx)(e.p,{children:"Synchronize TF transforms between systems:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Robot base to world"}),"\n",(0,t.jsx)(e.li,{children:"Link-to-link transforms"}),"\n",(0,t.jsx)(e.li,{children:"Sensor frame positions"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"data-flow-patterns",children:"Data Flow Patterns"}),"\n",(0,t.jsx)(e.h3,{id:"from-simulation-to-ros-2",children:"From Simulation to ROS 2"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Robot state updates"}),"\n",(0,t.jsx)(e.li,{children:"Sensor data publishing"}),"\n",(0,t.jsx)(e.li,{children:"Environment state changes"}),"\n",(0,t.jsx)(e.li,{children:"Event notifications"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"from-ros-2-to-simulation",children:"From ROS 2 to Simulation"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Control command execution"}),"\n",(0,t.jsx)(e.li,{children:"Robot configuration changes"}),"\n",(0,t.jsx)(e.li,{children:"Environment modifications"}),"\n",(0,t.jsx)(e.li,{children:"Simulation parameter updates"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"implementation-strategies",children:"Implementation Strategies"}),"\n",(0,t.jsx)(e.h3,{id:"direct-integration",children:"Direct Integration"}),"\n",(0,t.jsx)(e.p,{children:"Run simulation and ROS 2 in the same process:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Shared memory for high-speed communication"}),"\n",(0,t.jsx)(e.li,{children:"Single time source"}),"\n",(0,t.jsx)(e.li,{children:"Reduced latency"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"network-based-integration",children:"Network-Based Integration"}),"\n",(0,t.jsx)(e.p,{children:"Use network protocols for communication:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"ROS 2 TCP/UDP communication"}),"\n",(0,t.jsx)(e.li,{children:"WebSocket connections"}),"\n",(0,t.jsx)(e.li,{children:"HTTP APIs for configuration"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,t.jsx)(e.h3,{id:"message-throttling",children:"Message Throttling"}),"\n",(0,t.jsx)(e.p,{children:"Control message rates to prevent overload:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Priority-based message scheduling"}),"\n",(0,t.jsx)(e.li,{children:"Adaptive rate control"}),"\n",(0,t.jsx)(e.li,{children:"Message batching for efficiency"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"state-compression",children:"State Compression"}),"\n",(0,t.jsx)(e.p,{children:"Optimize data transmission:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Delta encoding for state changes"}),"\n",(0,t.jsx)(e.li,{children:"Lossy compression for sensor data"}),"\n",(0,t.jsx)(e.li,{children:"Predictive encoding for smooth motion"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"error-handling-and-recovery",children:"Error Handling and Recovery"}),"\n",(0,t.jsx)(e.h3,{id:"connection-management",children:"Connection Management"}),"\n",(0,t.jsx)(e.p,{children:"Handle network interruptions gracefully:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Automatic reconnection"}),"\n",(0,t.jsx)(e.li,{children:"Message buffering during outages"}),"\n",(0,t.jsx)(e.li,{children:"State recovery mechanisms"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"data-validation",children:"Data Validation"}),"\n",(0,t.jsx)(e.p,{children:"Validate data integrity:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Range checking for sensor values"}),"\n",(0,t.jsx)(e.li,{children:"Plausibility checks for robot states"}),"\n",(0,t.jsx)(e.li,{children:"Consistency verification across systems"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Implement robust error handling and recovery"}),"\n",(0,t.jsx)(e.li,{children:"Use appropriate QoS settings for different data types"}),"\n",(0,t.jsx)(e.li,{children:"Monitor synchronization performance metrics"}),"\n",(0,t.jsx)(e.li,{children:"Maintain security in networked implementations"}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},8453(n,e,i){i.d(e,{R:()=>o,x:()=>l});var t=i(6540);const s={},r=t.createContext(s);function o(n){const e=t.useContext(r);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);